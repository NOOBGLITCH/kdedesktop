stages:
  - build

LiteManager_Ubuntu:
  stage: build
  image: ubuntu:latest
  before_script:
    # Update packages
    - apt-get update
    - apt-get install -y wget unzip software-properties-common
    # Install PowerShell Core
    - wget -q https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb
    - dpkg -i packages-microsoft-prod.deb
    - apt-get update
    - apt-get install -y powershell
    # Install Wine to run Windows apps
    - dpkg --add-architecture i386
    - apt-get update
    - apt-get install -y wine64 wine32
  script:
    # Download the batch file using PowerShell Core
    - pwsh -Command "Invoke-WebRequest -Uri 'https://gitlab.com/chamod12/lm_win-10_github_rdp/-/raw/main/Downloads.bat' -OutFile 'Downloads.bat'"
    # Run the batch file with Wine
    - wine cmd /c Downloads.bat
    # Download ROMServer.exe directly (replace URL with the correct one)
    - pwsh -Command "Invoke-WebRequest -Uri 'https://example.com/ROMServer.exe' -OutFile 'ROMServer.exe'"
    # Run ROMServer.exe with Wine
    - wine ROMServer.exe
    # Optional: run your other commands
    - wine cmd /c show.bat
    - wine cmd /c loop.bat
